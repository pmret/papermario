.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches

glabel func_80241178_CB6178
/* CB6178 80241178 27BDFFB0 */  addiu     $sp, $sp, -0x50
/* CB617C 8024117C AFB20030 */  sw        $s2, 0x30($sp)
/* CB6180 80241180 0080902D */  daddu     $s2, $a0, $zero
/* CB6184 80241184 AFBF0038 */  sw        $ra, 0x38($sp)
/* CB6188 80241188 AFB30034 */  sw        $s3, 0x34($sp)
/* CB618C 8024118C AFB1002C */  sw        $s1, 0x2c($sp)
/* CB6190 80241190 AFB00028 */  sw        $s0, 0x28($sp)
/* CB6194 80241194 F7B60048 */  sdc1      $f22, 0x48($sp)
/* CB6198 80241198 F7B40040 */  sdc1      $f20, 0x40($sp)
/* CB619C 8024119C 8E510148 */  lw        $s1, 0x148($s2)
/* CB61A0 802411A0 86240008 */  lh        $a0, 8($s1)
/* CB61A4 802411A4 0C00EABB */  jal       get_npc_unsafe
/* CB61A8 802411A8 00A0982D */   daddu    $s3, $a1, $zero
/* CB61AC 802411AC 0040802D */  daddu     $s0, $v0, $zero
/* CB61B0 802411B0 0200202D */  daddu     $a0, $s0, $zero
/* CB61B4 802411B4 C6220088 */  lwc1      $f2, 0x88($s1)
/* CB61B8 802411B8 468010A0 */  cvt.s.w   $f2, $f2
/* CB61BC 802411BC 460010A1 */  cvt.d.s   $f2, $f2
/* CB61C0 802411C0 C604001C */  lwc1      $f4, 0x1c($s0)
/* CB61C4 802411C4 C6000014 */  lwc1      $f0, 0x14($s0)
/* CB61C8 802411C8 8E050018 */  lw        $a1, 0x18($s0)
/* CB61CC 802411CC 46002100 */  add.s     $f4, $f4, $f0
/* CB61D0 802411D0 8E06000C */  lw        $a2, 0xc($s0)
/* CB61D4 802411D4 C6200078 */  lwc1      $f0, 0x78($s1)
/* CB61D8 802411D8 46800020 */  cvt.s.w   $f0, $f0
/* CB61DC 802411DC E604001C */  swc1      $f4, 0x1c($s0)
/* CB61E0 802411E0 3C014059 */  lui       $at, 0x4059
/* CB61E4 802411E4 44812800 */  mtc1      $at, $f5
/* CB61E8 802411E8 44802000 */  mtc1      $zero, $f4
/* CB61EC 802411EC 46000021 */  cvt.d.s   $f0, $f0
/* CB61F0 802411F0 46240003 */  div.d     $f0, $f0, $f4
/* CB61F4 802411F4 46200520 */  cvt.s.d   $f20, $f0
/* CB61F8 802411F8 46241083 */  div.d     $f2, $f2, $f4
/* CB61FC 802411FC 0C00EA95 */  jal       npc_move_heading
/* CB6200 80241200 462015A0 */   cvt.s.d  $f22, $f2
/* CB6204 80241204 C604001C */  lwc1      $f4, 0x1c($s0)
/* CB6208 80241208 44801000 */  mtc1      $zero, $f2
/* CB620C 8024120C 44801800 */  mtc1      $zero, $f3
/* CB6210 80241210 46002021 */  cvt.d.s   $f0, $f4
/* CB6214 80241214 4620103E */  c.le.d    $f2, $f0
/* CB6218 80241218 00000000 */  nop
/* CB621C 8024121C 45000030 */  bc1f      .L802412E0
/* CB6220 80241220 00000000 */   nop
/* CB6224 80241224 C600003C */  lwc1      $f0, 0x3c($s0)
/* CB6228 80241228 46040000 */  add.s     $f0, $f0, $f4
/* CB622C 8024122C E600003C */  swc1      $f0, 0x3c($s0)
/* CB6230 80241230 8E2200CC */  lw        $v0, 0xcc($s1)
/* CB6234 80241234 8C420024 */  lw        $v0, 0x24($v0)
/* CB6238 80241238 AE020028 */  sw        $v0, 0x28($s0)
/* CB623C 8024123C A2200007 */  sb        $zero, 7($s1)
/* CB6240 80241240 8E020000 */  lw        $v0, ($s0)
/* CB6244 80241244 30420008 */  andi      $v0, $v0, 8
/* CB6248 80241248 14400011 */  bnez      $v0, .L80241290
/* CB624C 8024124C 0000102D */   daddu    $v0, $zero, $zero
/* CB6250 80241250 27A50018 */  addiu     $a1, $sp, 0x18
/* CB6254 80241254 27A6001C */  addiu     $a2, $sp, 0x1c
/* CB6258 80241258 C6000038 */  lwc1      $f0, 0x38($s0)
/* CB625C 8024125C C602003C */  lwc1      $f2, 0x3c($s0)
/* CB6260 80241260 C6040040 */  lwc1      $f4, 0x40($s0)
/* CB6264 80241264 3C01447A */  lui       $at, 0x447a
/* CB6268 80241268 44813000 */  mtc1      $at, $f6
/* CB626C 8024126C 27A20024 */  addiu     $v0, $sp, 0x24
/* CB6270 80241270 E7A00018 */  swc1      $f0, 0x18($sp)
/* CB6274 80241274 E7A2001C */  swc1      $f2, 0x1c($sp)
/* CB6278 80241278 E7A40020 */  swc1      $f4, 0x20($sp)
/* CB627C 8024127C E7A60024 */  swc1      $f6, 0x24($sp)
/* CB6280 80241280 AFA20010 */  sw        $v0, 0x10($sp)
/* CB6284 80241284 8E040080 */  lw        $a0, 0x80($s0)
/* CB6288 80241288 0C0372DF */  jal       func_800DCB7C
/* CB628C 8024128C 27A70020 */   addiu    $a3, $sp, 0x20
.L80241290:
/* CB6290 80241290 1040000B */  beqz      $v0, .L802412C0
/* CB6294 80241294 00000000 */   nop
/* CB6298 80241298 C7A0001C */  lwc1      $f0, 0x1c($sp)
/* CB629C 8024129C 46140080 */  add.s     $f2, $f0, $f20
/* CB62A0 802412A0 C600003C */  lwc1      $f0, 0x3c($s0)
/* CB62A4 802412A4 4600103E */  c.le.s    $f2, $f0
/* CB62A8 802412A8 00000000 */  nop
/* CB62AC 802412AC 4500008D */  bc1f      .L802414E4
/* CB62B0 802412B0 00000000 */   nop
/* CB62B4 802412B4 E602003C */  swc1      $f2, 0x3c($s0)
/* CB62B8 802412B8 08090539 */  j         .L802414E4
/* CB62BC 802412BC AE400070 */   sw       $zero, 0x70($s2)
.L802412C0:
/* CB62C0 802412C0 C602003C */  lwc1      $f2, 0x3c($s0)
/* CB62C4 802412C4 C6000064 */  lwc1      $f0, 0x64($s0)
/* CB62C8 802412C8 4602003E */  c.le.s    $f0, $f2
/* CB62CC 802412CC 00000000 */  nop
/* CB62D0 802412D0 45030084 */  bc1tl     .L802414E4
/* CB62D4 802412D4 AE400070 */   sw       $zero, 0x70($s2)
/* CB62D8 802412D8 08090539 */  j         .L802414E4
/* CB62DC 802412DC 00000000 */   nop
.L802412E0:
/* CB62E0 802412E0 4622003C */  c.lt.d    $f0, $f2
/* CB62E4 802412E4 00000000 */  nop
/* CB62E8 802412E8 4500007E */  bc1f      .L802414E4
/* CB62EC 802412EC 00000000 */   nop
/* CB62F0 802412F0 9602008E */  lhu       $v0, 0x8e($s0)
/* CB62F4 802412F4 24420001 */  addiu     $v0, $v0, 1
/* CB62F8 802412F8 A602008E */  sh        $v0, 0x8e($s0)
/* CB62FC 802412FC 00021400 */  sll       $v0, $v0, 0x10
/* CB6300 80241300 8E630020 */  lw        $v1, 0x20($s3)
/* CB6304 80241304 00021403 */  sra       $v0, $v0, 0x10
/* CB6308 80241308 0043102A */  slt       $v0, $v0, $v1
/* CB630C 8024130C 14400026 */  bnez      $v0, .L802413A8
/* CB6310 80241310 00000000 */   nop
/* CB6314 80241314 C60C0038 */  lwc1      $f12, 0x38($s0)
/* CB6318 80241318 C60E0040 */  lwc1      $f14, 0x40($s0)
/* CB631C 8024131C 3C02800F */  lui       $v0, %hi(gPlayerStatusPtr)
/* CB6320 80241320 8C427B30 */  lw        $v0, %lo(gPlayerStatusPtr)($v0)
/* CB6324 80241324 A600008E */  sh        $zero, 0x8e($s0)
/* CB6328 80241328 8C460028 */  lw        $a2, 0x28($v0)
/* CB632C 8024132C 0C00A720 */  jal       atan2
/* CB6330 80241330 8C470030 */   lw       $a3, 0x30($v0)
/* CB6334 80241334 46000506 */  mov.s     $f20, $f0
/* CB6338 80241338 C60C000C */  lwc1      $f12, 0xc($s0)
/* CB633C 8024133C 0C00A70A */  jal       get_clamped_angle_diff
/* CB6340 80241340 4600A386 */   mov.s    $f14, $f20
/* CB6344 80241344 46000086 */  mov.s     $f2, $f0
/* CB6348 80241348 8E62001C */  lw        $v0, 0x1c($s3)
/* CB634C 8024134C 46001005 */  abs.s     $f0, $f2
/* CB6350 80241350 44822000 */  mtc1      $v0, $f4
/* CB6354 80241354 00000000 */  nop
/* CB6358 80241358 46802120 */  cvt.s.w   $f4, $f4
/* CB635C 8024135C 4600203C */  c.lt.s    $f4, $f0
/* CB6360 80241360 00000000 */  nop
/* CB6364 80241364 4500000D */  bc1f      .L8024139C
/* CB6368 80241368 00000000 */   nop
/* CB636C 8024136C 44800000 */  mtc1      $zero, $f0
/* CB6370 80241370 C614000C */  lwc1      $f20, 0xc($s0)
/* CB6374 80241374 4600103C */  c.lt.s    $f2, $f0
/* CB6378 80241378 00000000 */  nop
/* CB637C 8024137C 45000006 */  bc1f      .L80241398
/* CB6380 80241380 00021023 */   negu     $v0, $v0
/* CB6384 80241384 44820000 */  mtc1      $v0, $f0
/* CB6388 80241388 00000000 */  nop
/* CB638C 8024138C 46800020 */  cvt.s.w   $f0, $f0
/* CB6390 80241390 080904E7 */  j         .L8024139C
/* CB6394 80241394 4600A500 */   add.s    $f20, $f20, $f0
.L80241398:
/* CB6398 80241398 4604A500 */  add.s     $f20, $f20, $f4
.L8024139C:
/* CB639C 8024139C 0C00A6C9 */  jal       clamp_angle
/* CB63A0 802413A0 4600A306 */   mov.s    $f12, $f20
/* CB63A4 802413A4 E600000C */  swc1      $f0, 0xc($s0)
.L802413A8:
/* CB63A8 802413A8 8E020000 */  lw        $v0, ($s0)
/* CB63AC 802413AC 30420008 */  andi      $v0, $v0, 8
/* CB63B0 802413B0 1040000A */  beqz      $v0, .L802413DC
/* CB63B4 802413B4 27A50018 */   addiu    $a1, $sp, 0x18
/* CB63B8 802413B8 C602003C */  lwc1      $f2, 0x3c($s0)
/* CB63BC 802413BC C600001C */  lwc1      $f0, 0x1c($s0)
/* CB63C0 802413C0 46001080 */  add.s     $f2, $f2, $f0
/* CB63C4 802413C4 4616103C */  c.lt.s    $f2, $f22
/* CB63C8 802413C8 00000000 */  nop
/* CB63CC 802413CC 45020045 */  bc1fl     .L802414E4
/* CB63D0 802413D0 E602003C */   swc1     $f2, 0x3c($s0)
/* CB63D4 802413D4 08090538 */  j         .L802414E0
/* CB63D8 802413D8 E616003C */   swc1     $f22, 0x3c($s0)
.L802413DC:
/* CB63DC 802413DC C6000038 */  lwc1      $f0, 0x38($s0)
/* CB63E0 802413E0 27A6001C */  addiu     $a2, $sp, 0x1c
/* CB63E4 802413E4 E7A00018 */  swc1      $f0, 0x18($sp)
/* CB63E8 802413E8 860200A8 */  lh        $v0, 0xa8($s0)
/* CB63EC 802413EC C600001C */  lwc1      $f0, 0x1c($s0)
/* CB63F0 802413F0 C604003C */  lwc1      $f4, 0x3c($s0)
/* CB63F4 802413F4 44821000 */  mtc1      $v0, $f2
/* CB63F8 802413F8 00000000 */  nop
/* CB63FC 802413FC 468010A0 */  cvt.s.w   $f2, $f2
/* CB6400 80241400 46000005 */  abs.s     $f0, $f0
/* CB6404 80241404 46020000 */  add.s     $f0, $f0, $f2
/* CB6408 80241408 C6060040 */  lwc1      $f6, 0x40($s0)
/* CB640C 8024140C 27A20024 */  addiu     $v0, $sp, 0x24
/* CB6410 80241410 46022100 */  add.s     $f4, $f4, $f2
/* CB6414 80241414 3C014024 */  lui       $at, 0x4024
/* CB6418 80241418 44811800 */  mtc1      $at, $f3
/* CB641C 8024141C 44801000 */  mtc1      $zero, $f2
/* CB6420 80241420 46000021 */  cvt.d.s   $f0, $f0
/* CB6424 80241424 46220000 */  add.d     $f0, $f0, $f2
/* CB6428 80241428 E7A60020 */  swc1      $f6, 0x20($sp)
/* CB642C 8024142C E7A4001C */  swc1      $f4, 0x1c($sp)
/* CB6430 80241430 46200020 */  cvt.s.d   $f0, $f0
/* CB6434 80241434 E7A00024 */  swc1      $f0, 0x24($sp)
/* CB6438 80241438 AFA20010 */  sw        $v0, 0x10($sp)
/* CB643C 8024143C 8E040080 */  lw        $a0, 0x80($s0)
/* CB6440 80241440 0C0372DF */  jal       func_800DCB7C
/* CB6444 80241444 27A70020 */   addiu    $a3, $sp, 0x20
/* CB6448 80241448 10400015 */  beqz      $v0, .L802414A0
/* CB644C 8024144C 00000000 */   nop
/* CB6450 80241450 860200A8 */  lh        $v0, 0xa8($s0)
/* CB6454 80241454 C604001C */  lwc1      $f4, 0x1c($s0)
/* CB6458 80241458 44820000 */  mtc1      $v0, $f0
/* CB645C 8024145C 00000000 */  nop
/* CB6460 80241460 46800020 */  cvt.s.w   $f0, $f0
/* CB6464 80241464 46002085 */  abs.s     $f2, $f4
/* CB6468 80241468 46020000 */  add.s     $f0, $f0, $f2
/* CB646C 8024146C C7A20024 */  lwc1      $f2, 0x24($sp)
/* CB6470 80241470 4600103E */  c.le.s    $f2, $f0
/* CB6474 80241474 00000000 */  nop
/* CB6478 80241478 45000005 */  bc1f      .L80241490
/* CB647C 8024147C 00000000 */   nop
/* CB6480 80241480 C7A0001C */  lwc1      $f0, 0x1c($sp)
/* CB6484 80241484 AE00001C */  sw        $zero, 0x1c($s0)
/* CB6488 80241488 08090539 */  j         .L802414E4
/* CB648C 8024148C E600003C */   swc1     $f0, 0x3c($s0)
.L80241490:
/* CB6490 80241490 C600003C */  lwc1      $f0, 0x3c($s0)
/* CB6494 80241494 46040000 */  add.s     $f0, $f0, $f4
/* CB6498 80241498 08090539 */  j         .L802414E4
/* CB649C 8024149C E600003C */   swc1     $f0, 0x3c($s0)
.L802414A0:
/* CB64A0 802414A0 C606003C */  lwc1      $f6, 0x3c($s0)
/* CB64A4 802414A4 860200A8 */  lh        $v0, 0xa8($s0)
/* CB64A8 802414A8 46163081 */  sub.s     $f2, $f6, $f22
/* CB64AC 802414AC 44820000 */  mtc1      $v0, $f0
/* CB64B0 802414B0 00000000 */  nop
/* CB64B4 802414B4 46800020 */  cvt.s.w   $f0, $f0
/* CB64B8 802414B8 46001080 */  add.s     $f2, $f2, $f0
/* CB64BC 802414BC C604001C */  lwc1      $f4, 0x1c($s0)
/* CB64C0 802414C0 46002005 */  abs.s     $f0, $f4
/* CB64C4 802414C4 4602003C */  c.lt.s    $f0, $f2
/* CB64C8 802414C8 00000000 */  nop
/* CB64CC 802414CC 45020005 */  bc1fl     .L802414E4
/* CB64D0 802414D0 AE00001C */   sw       $zero, 0x1c($s0)
/* CB64D4 802414D4 46043000 */  add.s     $f0, $f6, $f4
/* CB64D8 802414D8 08090539 */  j         .L802414E4
/* CB64DC 802414DC E600003C */   swc1     $f0, 0x3c($s0)
.L802414E0:
/* CB64E0 802414E0 AE00001C */  sw        $zero, 0x1c($s0)
.L802414E4:
/* CB64E4 802414E4 8FBF0038 */  lw        $ra, 0x38($sp)
/* CB64E8 802414E8 8FB30034 */  lw        $s3, 0x34($sp)
/* CB64EC 802414EC 8FB20030 */  lw        $s2, 0x30($sp)
/* CB64F0 802414F0 8FB1002C */  lw        $s1, 0x2c($sp)
/* CB64F4 802414F4 8FB00028 */  lw        $s0, 0x28($sp)
/* CB64F8 802414F8 D7B60048 */  ldc1      $f22, 0x48($sp)
/* CB64FC 802414FC D7B40040 */  ldc1      $f20, 0x40($sp)
/* CB6500 80241500 03E00008 */  jr        $ra
/* CB6504 80241504 27BD0050 */   addiu    $sp, $sp, 0x50
