.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches

glabel func_800496B8
/* 24AB8 800496B8 27BDFFA0 */  addiu     $sp, $sp, -0x60
/* 24ABC 800496BC AFB3004C */  sw        $s3, 0x4c($sp)
/* 24AC0 800496C0 0080982D */  daddu     $s3, $a0, $zero
/* 24AC4 800496C4 AFB40050 */  sw        $s4, 0x50($sp)
/* 24AC8 800496C8 00A0A02D */  daddu     $s4, $a1, $zero
/* 24ACC 800496CC AFBF0058 */  sw        $ra, 0x58($sp)
/* 24AD0 800496D0 AFB50054 */  sw        $s5, 0x54($sp)
/* 24AD4 800496D4 AFB20048 */  sw        $s2, 0x48($sp)
/* 24AD8 800496D8 AFB10044 */  sw        $s1, 0x44($sp)
/* 24ADC 800496DC AFB00040 */  sw        $s0, 0x40($sp)
/* 24AE0 800496E0 8E710148 */  lw        $s1, 0x148($s3)
/* 24AE4 800496E4 00C0902D */  daddu     $s2, $a2, $zero
/* 24AE8 800496E8 86240008 */  lh        $a0, 8($s1)
/* 24AEC 800496EC 0C00EABB */  jal       get_npc_unsafe
/* 24AF0 800496F0 0000A82D */   daddu    $s5, $zero, $zero
/* 24AF4 800496F4 8E830014 */  lw        $v1, 0x14($s4)
/* 24AF8 800496F8 0460005D */  bltz      $v1, .L80049870
/* 24AFC 800496FC 0040802D */   daddu    $s0, $v0, $zero
/* 24B00 80049700 8E620074 */  lw        $v0, 0x74($s3)
/* 24B04 80049704 1C400059 */  bgtz      $v0, .L8004986C
/* 24B08 80049708 2442FFFF */   addiu    $v0, $v0, -1
/* 24B0C 8004970C 0240202D */  daddu     $a0, $s2, $zero
/* 24B10 80049710 AE630074 */  sw        $v1, 0x74($s3)
/* 24B14 80049714 AFA00010 */  sw        $zero, 0x10($sp)
/* 24B18 80049718 8E86000C */  lw        $a2, 0xc($s4)
/* 24B1C 8004971C 8E870010 */  lw        $a3, 0x10($s4)
/* 24B20 80049720 0C01242D */  jal       func_800490B4
/* 24B24 80049724 0220282D */   daddu    $a1, $s1, $zero
/* 24B28 80049728 1040004E */  beqz      $v0, .L80049864
/* 24B2C 8004972C 00000000 */   nop
/* 24B30 80049730 C60C0038 */  lwc1      $f12, 0x38($s0)
/* 24B34 80049734 3C02800F */  lui       $v0, %hi(gPlayerStatusPtr)
/* 24B38 80049738 8C427B30 */  lw        $v0, %lo(gPlayerStatusPtr)($v0)
/* 24B3C 8004973C C60E0040 */  lwc1      $f14, 0x40($s0)
/* 24B40 80049740 C602003C */  lwc1      $f2, 0x3c($s0)
/* 24B44 80049744 46006006 */  mov.s     $f0, $f12
/* 24B48 80049748 8C460028 */  lw        $a2, 0x28($v0)
/* 24B4C 8004974C 8C470030 */  lw        $a3, 0x30($v0)
/* 24B50 80049750 46007106 */  mov.s     $f4, $f14
/* 24B54 80049754 E7A00028 */  swc1      $f0, 0x28($sp)
/* 24B58 80049758 E7A2002C */  swc1      $f2, 0x2c($sp)
/* 24B5C 8004975C 0C00A720 */  jal       atan2
/* 24B60 80049760 E7A40030 */   swc1     $f4, 0x30($sp)
/* 24B64 80049764 C6820018 */  lwc1      $f2, 0x18($s4)
/* 24B68 80049768 E7A00038 */  swc1      $f0, 0x38($sp)
/* 24B6C 8004976C E7A00014 */  swc1      $f0, 0x14($sp)
/* 24B70 80049770 E7A20010 */  swc1      $f2, 0x10($sp)
/* 24B74 80049774 860200A8 */  lh        $v0, 0xa8($s0)
/* 24B78 80049778 27A50028 */  addiu     $a1, $sp, 0x28
/* 24B7C 8004977C 44820000 */  mtc1      $v0, $f0
/* 24B80 80049780 00000000 */  nop
/* 24B84 80049784 46800020 */  cvt.s.w   $f0, $f0
/* 24B88 80049788 E7A00018 */  swc1      $f0, 0x18($sp)
/* 24B8C 8004978C 860200A6 */  lh        $v0, 0xa6($s0)
/* 24B90 80049790 27A6002C */  addiu     $a2, $sp, 0x2c
/* 24B94 80049794 44820000 */  mtc1      $v0, $f0
/* 24B98 80049798 00000000 */  nop
/* 24B9C 8004979C 46800020 */  cvt.s.w   $f0, $f0
/* 24BA0 800497A0 E7A0001C */  swc1      $f0, 0x1c($sp)
/* 24BA4 800497A4 8E040080 */  lw        $a0, 0x80($s0)
/* 24BA8 800497A8 0C037711 */  jal       npc_test_move_simple_with_slipping
/* 24BAC 800497AC 27A70030 */   addiu    $a3, $sp, 0x30
/* 24BB0 800497B0 1440002C */  bnez      $v0, .L80049864
/* 24BB4 800497B4 0200202D */   daddu    $a0, $s0, $zero
/* 24BB8 800497B8 240502F4 */  addiu     $a1, $zero, 0x2f4
/* 24BBC 800497BC C7A00038 */  lwc1      $f0, 0x38($sp)
/* 24BC0 800497C0 3C060020 */  lui       $a2, 0x20
/* 24BC4 800497C4 0C012530 */  jal       ai_enemy_play_sound
/* 24BC8 800497C8 E600000C */   swc1     $f0, 0xc($s0)
/* 24BCC 800497CC 02A0202D */  daddu     $a0, $s5, $zero
/* 24BD0 800497D0 0200282D */  daddu     $a1, $s0, $zero
/* 24BD4 800497D4 0000302D */  daddu     $a2, $zero, $zero
/* 24BD8 800497D8 84A300A8 */  lh        $v1, 0xa8($a1)
/* 24BDC 800497DC 3C013F80 */  lui       $at, 0x3f80
/* 24BE0 800497E0 44810000 */  mtc1      $at, $f0
/* 24BE4 800497E4 3C014000 */  lui       $at, 0x4000
/* 24BE8 800497E8 44811000 */  mtc1      $at, $f2
/* 24BEC 800497EC 3C01C1A0 */  lui       $at, 0xc1a0
/* 24BF0 800497F0 44812000 */  mtc1      $at, $f4
/* 24BF4 800497F4 2402000F */  addiu     $v0, $zero, 0xf
/* 24BF8 800497F8 AFA2001C */  sw        $v0, 0x1c($sp)
/* 24BFC 800497FC 44833000 */  mtc1      $v1, $f6
/* 24C00 80049800 00000000 */  nop
/* 24C04 80049804 468031A0 */  cvt.s.w   $f6, $f6
/* 24C08 80049808 44073000 */  mfc1      $a3, $f6
/* 24C0C 8004980C 27A20034 */  addiu     $v0, $sp, 0x34
/* 24C10 80049810 AFA20020 */  sw        $v0, 0x20($sp)
/* 24C14 80049814 E7A00010 */  swc1      $f0, 0x10($sp)
/* 24C18 80049818 E7A20014 */  swc1      $f2, 0x14($sp)
/* 24C1C 8004981C 0C01BFA4 */  jal       fx_emote
/* 24C20 80049820 E7A40018 */   swc1     $f4, 0x18($sp)
/* 24C24 80049824 2403FFBF */  addiu     $v1, $zero, -0x41
/* 24C28 80049828 8E2200B0 */  lw        $v0, 0xb0($s1)
/* 24C2C 8004982C 8E240018 */  lw        $a0, 0x18($s1)
/* 24C30 80049830 00431024 */  and       $v0, $v0, $v1
/* 24C34 80049834 2403FFDF */  addiu     $v1, $zero, -0x21
/* 24C38 80049838 00431024 */  and       $v0, $v0, $v1
/* 24C3C 8004983C AE2200B0 */  sw        $v0, 0xb0($s1)
/* 24C40 80049840 9482002A */  lhu       $v0, 0x2a($a0)
/* 24C44 80049844 30420001 */  andi      $v0, $v0, 1
/* 24C48 80049848 10400003 */  beqz      $v0, .L80049858
/* 24C4C 8004984C 2402000A */   addiu    $v0, $zero, 0xa
/* 24C50 80049850 080126C8 */  j         .L80049B20
/* 24C54 80049854 AE620070 */   sw       $v0, 0x70($s3)
.L80049858:
/* 24C58 80049858 2402000C */  addiu     $v0, $zero, 0xc
/* 24C5C 8004985C 080126C8 */  j         .L80049B20
/* 24C60 80049860 AE620070 */   sw       $v0, 0x70($s3)
.L80049864:
/* 24C64 80049864 8E620074 */  lw        $v0, 0x74($s3)
/* 24C68 80049868 2442FFFF */  addiu     $v0, $v0, -1
.L8004986C:
/* 24C6C 8004986C AE620074 */  sw        $v0, 0x74($s3)
.L80049870:
/* 24C70 80049870 8E2300D0 */  lw        $v1, 0xd0($s1)
/* 24C74 80049874 C6000040 */  lwc1      $f0, 0x40($s0)
/* 24C78 80049878 C4620000 */  lwc1      $f2, ($v1)
/* 24C7C 8004987C 468010A0 */  cvt.s.w   $f2, $f2
/* 24C80 80049880 C4640008 */  lwc1      $f4, 8($v1)
/* 24C84 80049884 46802120 */  cvt.s.w   $f4, $f4
/* 24C88 80049888 E7A00010 */  swc1      $f0, 0x10($sp)
/* 24C8C 8004988C 8E2200D0 */  lw        $v0, 0xd0($s1)
/* 24C90 80049890 44051000 */  mfc1      $a1, $f2
/* 24C94 80049894 C440000C */  lwc1      $f0, 0xc($v0)
/* 24C98 80049898 46800020 */  cvt.s.w   $f0, $f0
/* 24C9C 8004989C E7A00014 */  swc1      $f0, 0x14($sp)
/* 24CA0 800498A0 8E2200D0 */  lw        $v0, 0xd0($s1)
/* 24CA4 800498A4 44062000 */  mfc1      $a2, $f4
/* 24CA8 800498A8 C4400010 */  lwc1      $f0, 0x10($v0)
/* 24CAC 800498AC 46800020 */  cvt.s.w   $f0, $f0
/* 24CB0 800498B0 E7A00018 */  swc1      $f0, 0x18($sp)
/* 24CB4 800498B4 8C640018 */  lw        $a0, 0x18($v1)
/* 24CB8 800498B8 0C0123F5 */  jal       is_point_within_region
/* 24CBC 800498BC 8E070038 */   lw       $a3, 0x38($s0)
/* 24CC0 800498C0 10400064 */  beqz      $v0, .L80049A54
/* 24CC4 800498C4 00000000 */   nop
/* 24CC8 800498C8 8E060038 */  lw        $a2, 0x38($s0)
/* 24CCC 800498CC 8E2200D0 */  lw        $v0, 0xd0($s1)
/* 24CD0 800498D0 8E070040 */  lw        $a3, 0x40($s0)
/* 24CD4 800498D4 C44C0000 */  lwc1      $f12, ($v0)
/* 24CD8 800498D8 46806320 */  cvt.s.w   $f12, $f12
/* 24CDC 800498DC C44E0008 */  lwc1      $f14, 8($v0)
/* 24CE0 800498E0 0C00A7B5 */  jal       dist2D
/* 24CE4 800498E4 468073A0 */   cvt.s.w  $f14, $f14
/* 24CE8 800498E8 C6020018 */  lwc1      $f2, 0x18($s0)
/* 24CEC 800498EC 4600103C */  c.lt.s    $f2, $f0
/* 24CF0 800498F0 00000000 */  nop
/* 24CF4 800498F4 45000057 */  bc1f      .L80049A54
/* 24CF8 800498F8 00000000 */   nop
/* 24CFC 800498FC 8E2300B0 */  lw        $v1, 0xb0($s1)
/* 24D00 80049900 30620020 */  andi      $v0, $v1, 0x20
/* 24D04 80049904 14400002 */  bnez      $v0, .L80049910
/* 24D08 80049908 34620060 */   ori      $v0, $v1, 0x60
/* 24D0C 8004990C AE2200B0 */  sw        $v0, 0xb0($s1)
.L80049910:
/* 24D10 80049910 8E2200B0 */  lw        $v0, 0xb0($s1)
/* 24D14 80049914 30420040 */  andi      $v0, $v0, 0x40
/* 24D18 80049918 10400013 */  beqz      $v0, .L80049968
/* 24D1C 8004991C 00000000 */   nop
/* 24D20 80049920 C60C0038 */  lwc1      $f12, 0x38($s0)
/* 24D24 80049924 8E2200D0 */  lw        $v0, 0xd0($s1)
/* 24D28 80049928 C60E0040 */  lwc1      $f14, 0x40($s0)
/* 24D2C 8004992C C4460000 */  lwc1      $f6, ($v0)
/* 24D30 80049930 468031A0 */  cvt.s.w   $f6, $f6
/* 24D34 80049934 44063000 */  mfc1      $a2, $f6
/* 24D38 80049938 C4460008 */  lwc1      $f6, 8($v0)
/* 24D3C 8004993C 468031A0 */  cvt.s.w   $f6, $f6
/* 24D40 80049940 44073000 */  mfc1      $a3, $f6
/* 24D44 80049944 0C00A720 */  jal       atan2
/* 24D48 80049948 00000000 */   nop
/* 24D4C 8004994C 0C00A6C9 */  jal       clamp_angle
/* 24D50 80049950 46000306 */   mov.s    $f12, $f0
/* 24D54 80049954 E600000C */  swc1      $f0, 0xc($s0)
/* 24D58 80049958 8E2200B0 */  lw        $v0, 0xb0($s1)
/* 24D5C 8004995C 2403FFBF */  addiu     $v1, $zero, -0x41
/* 24D60 80049960 00431024 */  and       $v0, $v0, $v1
/* 24D64 80049964 AE2200B0 */  sw        $v0, 0xb0($s1)
.L80049968:
/* 24D68 80049968 C6000018 */  lwc1      $f0, 0x18($s0)
/* 24D6C 8004996C C6020038 */  lwc1      $f2, 0x38($s0)
/* 24D70 80049970 46000021 */  cvt.d.s   $f0, $f0
/* 24D74 80049974 E7A20028 */  swc1      $f2, 0x28($sp)
/* 24D78 80049978 C602003C */  lwc1      $f2, 0x3c($s0)
/* 24D7C 8004997C C6040040 */  lwc1      $f4, 0x40($s0)
/* 24D80 80049980 46200000 */  add.d     $f0, $f0, $f0
/* 24D84 80049984 E7A2002C */  swc1      $f2, 0x2c($sp)
/* 24D88 80049988 E7A40030 */  swc1      $f4, 0x30($sp)
/* 24D8C 8004998C 46200020 */  cvt.s.d   $f0, $f0
/* 24D90 80049990 E7A00010 */  swc1      $f0, 0x10($sp)
/* 24D94 80049994 C600000C */  lwc1      $f0, 0xc($s0)
/* 24D98 80049998 E7A00014 */  swc1      $f0, 0x14($sp)
/* 24D9C 8004999C 860200A8 */  lh        $v0, 0xa8($s0)
/* 24DA0 800499A0 27A50028 */  addiu     $a1, $sp, 0x28
/* 24DA4 800499A4 44820000 */  mtc1      $v0, $f0
/* 24DA8 800499A8 00000000 */  nop
/* 24DAC 800499AC 46800020 */  cvt.s.w   $f0, $f0
/* 24DB0 800499B0 E7A00018 */  swc1      $f0, 0x18($sp)
/* 24DB4 800499B4 860200A6 */  lh        $v0, 0xa6($s0)
/* 24DB8 800499B8 27A6002C */  addiu     $a2, $sp, 0x2c
/* 24DBC 800499BC 44820000 */  mtc1      $v0, $f0
/* 24DC0 800499C0 00000000 */  nop
/* 24DC4 800499C4 46800020 */  cvt.s.w   $f0, $f0
/* 24DC8 800499C8 E7A0001C */  swc1      $f0, 0x1c($sp)
/* 24DCC 800499CC 8E040080 */  lw        $a0, 0x80($s0)
/* 24DD0 800499D0 0C037711 */  jal       npc_test_move_simple_with_slipping
/* 24DD4 800499D4 27A70030 */   addiu    $a3, $sp, 0x30
/* 24DD8 800499D8 10400026 */  beqz      $v0, .L80049A74
/* 24DDC 800499DC 24150001 */   addiu    $s5, $zero, 1
/* 24DE0 800499E0 C60C0038 */  lwc1      $f12, 0x38($s0)
/* 24DE4 800499E4 8E2200D0 */  lw        $v0, 0xd0($s1)
/* 24DE8 800499E8 C60E0040 */  lwc1      $f14, 0x40($s0)
/* 24DEC 800499EC C4460000 */  lwc1      $f6, ($v0)
/* 24DF0 800499F0 468031A0 */  cvt.s.w   $f6, $f6
/* 24DF4 800499F4 44063000 */  mfc1      $a2, $f6
/* 24DF8 800499F8 C4460008 */  lwc1      $f6, 8($v0)
/* 24DFC 800499FC 468031A0 */  cvt.s.w   $f6, $f6
/* 24E00 80049A00 44073000 */  mfc1      $a3, $f6
/* 24E04 80049A04 0C00A720 */  jal       atan2
/* 24E08 80049A08 00000000 */   nop
/* 24E0C 80049A0C 0C00A6C9 */  jal       clamp_angle
/* 24E10 80049A10 46000306 */   mov.s    $f12, $f0
/* 24E14 80049A14 0200202D */  daddu     $a0, $s0, $zero
/* 24E18 80049A18 27A60038 */  addiu     $a2, $sp, 0x38
/* 24E1C 80049A1C 0000382D */  daddu     $a3, $zero, $zero
/* 24E20 80049A20 2403FFBF */  addiu     $v1, $zero, -0x41
/* 24E24 80049A24 E7A00038 */  swc1      $f0, 0x38($sp)
/* 24E28 80049A28 8E2200B0 */  lw        $v0, 0xb0($s1)
/* 24E2C 80049A2C 3C0540A0 */  lui       $a1, 0x40a0
/* 24E30 80049A30 00431024 */  and       $v0, $v0, $v1
/* 24E34 80049A34 AE2200B0 */  sw        $v0, 0xb0($s1)
/* 24E38 80049A38 AFA00010 */  sw        $zero, 0x10($sp)
/* 24E3C 80049A3C 0C0129E1 */  jal       func_8004A784
/* 24E40 80049A40 AFA00014 */   sw       $zero, 0x14($sp)
/* 24E44 80049A44 C7A00038 */  lwc1      $f0, 0x38($sp)
/* 24E48 80049A48 E600000C */  swc1      $f0, 0xc($s0)
/* 24E4C 80049A4C 0801269D */  j         .L80049A74
/* 24E50 80049A50 24150001 */   addiu    $s5, $zero, 1
.L80049A54:
/* 24E54 80049A54 8E2300B0 */  lw        $v1, 0xb0($s1)
/* 24E58 80049A58 30620020 */  andi      $v0, $v1, 0x20
/* 24E5C 80049A5C 10400005 */  beqz      $v0, .L80049A74
/* 24E60 80049A60 2402FFDF */   addiu    $v0, $zero, -0x21
/* 24E64 80049A64 00621024 */  and       $v0, $v1, $v0
/* 24E68 80049A68 2403FFBF */  addiu     $v1, $zero, -0x41
/* 24E6C 80049A6C 00431024 */  and       $v0, $v0, $v1
/* 24E70 80049A70 AE2200B0 */  sw        $v0, 0xb0($s1)
.L80049A74:
/* 24E74 80049A74 8E2200D0 */  lw        $v0, 0xd0($s1)
/* 24E78 80049A78 8C43000C */  lw        $v1, 0xc($v0)
/* 24E7C 80049A7C 8C420010 */  lw        $v0, 0x10($v0)
/* 24E80 80049A80 00621825 */  or        $v1, $v1, $v0
/* 24E84 80049A84 00751825 */  or        $v1, $v1, $s5
/* 24E88 80049A88 10600008 */  beqz      $v1, .L80049AAC
/* 24E8C 80049A8C 00000000 */   nop
/* 24E90 80049A90 8602008C */  lh        $v0, 0x8c($s0)
/* 24E94 80049A94 14400022 */  bnez      $v0, .L80049B20
/* 24E98 80049A98 00000000 */   nop
/* 24E9C 80049A9C 8E050018 */  lw        $a1, 0x18($s0)
/* 24EA0 80049AA0 8E06000C */  lw        $a2, 0xc($s0)
/* 24EA4 80049AA4 0C00EA95 */  jal       npc_move_heading
/* 24EA8 80049AA8 0200202D */   daddu    $a0, $s0, $zero
.L80049AAC:
/* 24EAC 80049AAC 8E820004 */  lw        $v0, 4($s4)
/* 24EB0 80049AB0 1840001B */  blez      $v0, .L80049B20
/* 24EB4 80049AB4 00000000 */   nop
/* 24EB8 80049AB8 9602008E */  lhu       $v0, 0x8e($s0)
/* 24EBC 80049ABC 2442FFFF */  addiu     $v0, $v0, -1
/* 24EC0 80049AC0 A602008E */  sh        $v0, 0x8e($s0)
/* 24EC4 80049AC4 00021400 */  sll       $v0, $v0, 0x10
/* 24EC8 80049AC8 1C400015 */  bgtz      $v0, .L80049B20
/* 24ECC 80049ACC 240403E8 */   addiu    $a0, $zero, 0x3e8
/* 24ED0 80049AD0 24020002 */  addiu     $v0, $zero, 2
/* 24ED4 80049AD4 0C00A67F */  jal       rand_int
/* 24ED8 80049AD8 AE620070 */   sw       $v0, 0x70($s3)
/* 24EDC 80049ADC 3C035555 */  lui       $v1, 0x5555
/* 24EE0 80049AE0 34635556 */  ori       $v1, $v1, 0x5556
/* 24EE4 80049AE4 00430018 */  mult      $v0, $v1
/* 24EE8 80049AE8 000227C3 */  sra       $a0, $v0, 0x1f
/* 24EEC 80049AEC 00004010 */  mfhi      $t0
/* 24EF0 80049AF0 01042023 */  subu      $a0, $t0, $a0
/* 24EF4 80049AF4 00041840 */  sll       $v1, $a0, 1
/* 24EF8 80049AF8 00641821 */  addu      $v1, $v1, $a0
/* 24EFC 80049AFC 00431023 */  subu      $v0, $v0, $v1
/* 24F00 80049B00 24420002 */  addiu     $v0, $v0, 2
/* 24F04 80049B04 AE620074 */  sw        $v0, 0x74($s3)
/* 24F08 80049B08 8E82002C */  lw        $v0, 0x2c($s4)
/* 24F0C 80049B0C 58400004 */  blezl     $v0, .L80049B20
/* 24F10 80049B10 AE600070 */   sw       $zero, 0x70($s3)
/* 24F14 80049B14 8E820008 */  lw        $v0, 8($s4)
/* 24F18 80049B18 58400001 */  blezl     $v0, .L80049B20
/* 24F1C 80049B1C AE600070 */   sw       $zero, 0x70($s3)
.L80049B20:
/* 24F20 80049B20 8FBF0058 */  lw        $ra, 0x58($sp)
/* 24F24 80049B24 8FB50054 */  lw        $s5, 0x54($sp)
/* 24F28 80049B28 8FB40050 */  lw        $s4, 0x50($sp)
/* 24F2C 80049B2C 8FB3004C */  lw        $s3, 0x4c($sp)
/* 24F30 80049B30 8FB20048 */  lw        $s2, 0x48($sp)
/* 24F34 80049B34 8FB10044 */  lw        $s1, 0x44($sp)
/* 24F38 80049B38 8FB00040 */  lw        $s0, 0x40($sp)
/* 24F3C 80049B3C 03E00008 */  jr        $ra
/* 24F40 80049B40 27BD0060 */   addiu    $sp, $sp, 0x60
