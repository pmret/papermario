.set noat      # allow manual use of $at
.set noreorder # don't insert nops after branches

glabel func_80240E58_C37388
/* C37388 80240E58 27BDFFB0 */  addiu     $sp, $sp, -0x50
/* C3738C 80240E5C AFB20030 */  sw        $s2, 0x30($sp)
/* C37390 80240E60 0080902D */  daddu     $s2, $a0, $zero
/* C37394 80240E64 AFBF0038 */  sw        $ra, 0x38($sp)
/* C37398 80240E68 AFB30034 */  sw        $s3, 0x34($sp)
/* C3739C 80240E6C AFB1002C */  sw        $s1, 0x2c($sp)
/* C373A0 80240E70 AFB00028 */  sw        $s0, 0x28($sp)
/* C373A4 80240E74 F7B60048 */  sdc1      $f22, 0x48($sp)
/* C373A8 80240E78 F7B40040 */  sdc1      $f20, 0x40($sp)
/* C373AC 80240E7C 8E510148 */  lw        $s1, 0x148($s2)
/* C373B0 80240E80 86240008 */  lh        $a0, 8($s1)
/* C373B4 80240E84 0C00EABB */  jal       get_npc_unsafe
/* C373B8 80240E88 00A0982D */   daddu    $s3, $a1, $zero
/* C373BC 80240E8C 0040802D */  daddu     $s0, $v0, $zero
/* C373C0 80240E90 0200202D */  daddu     $a0, $s0, $zero
/* C373C4 80240E94 C6220088 */  lwc1      $f2, 0x88($s1)
/* C373C8 80240E98 468010A0 */  cvt.s.w   $f2, $f2
/* C373CC 80240E9C 460010A1 */  cvt.d.s   $f2, $f2
/* C373D0 80240EA0 C604001C */  lwc1      $f4, 0x1c($s0)
/* C373D4 80240EA4 C6000014 */  lwc1      $f0, 0x14($s0)
/* C373D8 80240EA8 8E050018 */  lw        $a1, 0x18($s0)
/* C373DC 80240EAC 46002100 */  add.s     $f4, $f4, $f0
/* C373E0 80240EB0 8E06000C */  lw        $a2, 0xc($s0)
/* C373E4 80240EB4 C6200078 */  lwc1      $f0, 0x78($s1)
/* C373E8 80240EB8 46800020 */  cvt.s.w   $f0, $f0
/* C373EC 80240EBC E604001C */  swc1      $f4, 0x1c($s0)
/* C373F0 80240EC0 3C014059 */  lui       $at, 0x4059
/* C373F4 80240EC4 44812800 */  mtc1      $at, $f5
/* C373F8 80240EC8 44802000 */  mtc1      $zero, $f4
/* C373FC 80240ECC 46000021 */  cvt.d.s   $f0, $f0
/* C37400 80240ED0 46240003 */  div.d     $f0, $f0, $f4
/* C37404 80240ED4 46200520 */  cvt.s.d   $f20, $f0
/* C37408 80240ED8 46241083 */  div.d     $f2, $f2, $f4
/* C3740C 80240EDC 0C00EA95 */  jal       npc_move_heading
/* C37410 80240EE0 462015A0 */   cvt.s.d  $f22, $f2
/* C37414 80240EE4 C604001C */  lwc1      $f4, 0x1c($s0)
/* C37418 80240EE8 44801000 */  mtc1      $zero, $f2
/* C3741C 80240EEC 44801800 */  mtc1      $zero, $f3
/* C37420 80240EF0 46002021 */  cvt.d.s   $f0, $f4
/* C37424 80240EF4 4620103E */  c.le.d    $f2, $f0
/* C37428 80240EF8 00000000 */  nop
/* C3742C 80240EFC 45000030 */  bc1f      .L80240FC0
/* C37430 80240F00 00000000 */   nop
/* C37434 80240F04 C600003C */  lwc1      $f0, 0x3c($s0)
/* C37438 80240F08 46040000 */  add.s     $f0, $f0, $f4
/* C3743C 80240F0C E600003C */  swc1      $f0, 0x3c($s0)
/* C37440 80240F10 8E2200CC */  lw        $v0, 0xcc($s1)
/* C37444 80240F14 8C420024 */  lw        $v0, 0x24($v0)
/* C37448 80240F18 AE020028 */  sw        $v0, 0x28($s0)
/* C3744C 80240F1C A2200007 */  sb        $zero, 7($s1)
/* C37450 80240F20 8E020000 */  lw        $v0, ($s0)
/* C37454 80240F24 30420008 */  andi      $v0, $v0, 8
/* C37458 80240F28 14400011 */  bnez      $v0, .L80240F70
/* C3745C 80240F2C 0000102D */   daddu    $v0, $zero, $zero
/* C37460 80240F30 27A50018 */  addiu     $a1, $sp, 0x18
/* C37464 80240F34 27A6001C */  addiu     $a2, $sp, 0x1c
/* C37468 80240F38 C6000038 */  lwc1      $f0, 0x38($s0)
/* C3746C 80240F3C C602003C */  lwc1      $f2, 0x3c($s0)
/* C37470 80240F40 C6040040 */  lwc1      $f4, 0x40($s0)
/* C37474 80240F44 3C01447A */  lui       $at, 0x447a
/* C37478 80240F48 44813000 */  mtc1      $at, $f6
/* C3747C 80240F4C 27A20024 */  addiu     $v0, $sp, 0x24
/* C37480 80240F50 E7A00018 */  swc1      $f0, 0x18($sp)
/* C37484 80240F54 E7A2001C */  swc1      $f2, 0x1c($sp)
/* C37488 80240F58 E7A40020 */  swc1      $f4, 0x20($sp)
/* C3748C 80240F5C E7A60024 */  swc1      $f6, 0x24($sp)
/* C37490 80240F60 AFA20010 */  sw        $v0, 0x10($sp)
/* C37494 80240F64 8E040080 */  lw        $a0, 0x80($s0)
/* C37498 80240F68 0C0372DF */  jal       func_800DCB7C
/* C3749C 80240F6C 27A70020 */   addiu    $a3, $sp, 0x20
.L80240F70:
/* C374A0 80240F70 1040000B */  beqz      $v0, .L80240FA0
/* C374A4 80240F74 00000000 */   nop
/* C374A8 80240F78 C7A0001C */  lwc1      $f0, 0x1c($sp)
/* C374AC 80240F7C 46140080 */  add.s     $f2, $f0, $f20
/* C374B0 80240F80 C600003C */  lwc1      $f0, 0x3c($s0)
/* C374B4 80240F84 4600103E */  c.le.s    $f2, $f0
/* C374B8 80240F88 00000000 */  nop
/* C374BC 80240F8C 4500008D */  bc1f      .L802411C4
/* C374C0 80240F90 00000000 */   nop
/* C374C4 80240F94 E602003C */  swc1      $f2, 0x3c($s0)
/* C374C8 80240F98 08090471 */  j         .L802411C4
/* C374CC 80240F9C AE400070 */   sw       $zero, 0x70($s2)
.L80240FA0:
/* C374D0 80240FA0 C602003C */  lwc1      $f2, 0x3c($s0)
/* C374D4 80240FA4 C6000064 */  lwc1      $f0, 0x64($s0)
/* C374D8 80240FA8 4602003E */  c.le.s    $f0, $f2
/* C374DC 80240FAC 00000000 */  nop
/* C374E0 80240FB0 45030084 */  bc1tl     .L802411C4
/* C374E4 80240FB4 AE400070 */   sw       $zero, 0x70($s2)
/* C374E8 80240FB8 08090471 */  j         .L802411C4
/* C374EC 80240FBC 00000000 */   nop
.L80240FC0:
/* C374F0 80240FC0 4622003C */  c.lt.d    $f0, $f2
/* C374F4 80240FC4 00000000 */  nop
/* C374F8 80240FC8 4500007E */  bc1f      .L802411C4
/* C374FC 80240FCC 00000000 */   nop
/* C37500 80240FD0 9602008E */  lhu       $v0, 0x8e($s0)
/* C37504 80240FD4 24420001 */  addiu     $v0, $v0, 1
/* C37508 80240FD8 A602008E */  sh        $v0, 0x8e($s0)
/* C3750C 80240FDC 00021400 */  sll       $v0, $v0, 0x10
/* C37510 80240FE0 8E630020 */  lw        $v1, 0x20($s3)
/* C37514 80240FE4 00021403 */  sra       $v0, $v0, 0x10
/* C37518 80240FE8 0043102A */  slt       $v0, $v0, $v1
/* C3751C 80240FEC 14400026 */  bnez      $v0, .L80241088
/* C37520 80240FF0 00000000 */   nop
/* C37524 80240FF4 C60C0038 */  lwc1      $f12, 0x38($s0)
/* C37528 80240FF8 C60E0040 */  lwc1      $f14, 0x40($s0)
/* C3752C 80240FFC 3C02800F */  lui       $v0, %hi(gPlayerStatusPtr)
/* C37530 80241000 8C427B30 */  lw        $v0, %lo(gPlayerStatusPtr)($v0)
/* C37534 80241004 A600008E */  sh        $zero, 0x8e($s0)
/* C37538 80241008 8C460028 */  lw        $a2, 0x28($v0)
/* C3753C 8024100C 0C00A720 */  jal       atan2
/* C37540 80241010 8C470030 */   lw       $a3, 0x30($v0)
/* C37544 80241014 46000506 */  mov.s     $f20, $f0
/* C37548 80241018 C60C000C */  lwc1      $f12, 0xc($s0)
/* C3754C 8024101C 0C00A70A */  jal       get_clamped_angle_diff
/* C37550 80241020 4600A386 */   mov.s    $f14, $f20
/* C37554 80241024 46000086 */  mov.s     $f2, $f0
/* C37558 80241028 8E62001C */  lw        $v0, 0x1c($s3)
/* C3755C 8024102C 46001005 */  abs.s     $f0, $f2
/* C37560 80241030 44822000 */  mtc1      $v0, $f4
/* C37564 80241034 00000000 */  nop
/* C37568 80241038 46802120 */  cvt.s.w   $f4, $f4
/* C3756C 8024103C 4600203C */  c.lt.s    $f4, $f0
/* C37570 80241040 00000000 */  nop
/* C37574 80241044 4500000D */  bc1f      .L8024107C
/* C37578 80241048 00000000 */   nop
/* C3757C 8024104C 44800000 */  mtc1      $zero, $f0
/* C37580 80241050 C614000C */  lwc1      $f20, 0xc($s0)
/* C37584 80241054 4600103C */  c.lt.s    $f2, $f0
/* C37588 80241058 00000000 */  nop
/* C3758C 8024105C 45000006 */  bc1f      .L80241078
/* C37590 80241060 00021023 */   negu     $v0, $v0
/* C37594 80241064 44820000 */  mtc1      $v0, $f0
/* C37598 80241068 00000000 */  nop
/* C3759C 8024106C 46800020 */  cvt.s.w   $f0, $f0
/* C375A0 80241070 0809041F */  j         .L8024107C
/* C375A4 80241074 4600A500 */   add.s    $f20, $f20, $f0
.L80241078:
/* C375A8 80241078 4604A500 */  add.s     $f20, $f20, $f4
.L8024107C:
/* C375AC 8024107C 0C00A6C9 */  jal       clamp_angle
/* C375B0 80241080 4600A306 */   mov.s    $f12, $f20
/* C375B4 80241084 E600000C */  swc1      $f0, 0xc($s0)
.L80241088:
/* C375B8 80241088 8E020000 */  lw        $v0, ($s0)
/* C375BC 8024108C 30420008 */  andi      $v0, $v0, 8
/* C375C0 80241090 1040000A */  beqz      $v0, .L802410BC
/* C375C4 80241094 27A50018 */   addiu    $a1, $sp, 0x18
/* C375C8 80241098 C602003C */  lwc1      $f2, 0x3c($s0)
/* C375CC 8024109C C600001C */  lwc1      $f0, 0x1c($s0)
/* C375D0 802410A0 46001080 */  add.s     $f2, $f2, $f0
/* C375D4 802410A4 4616103C */  c.lt.s    $f2, $f22
/* C375D8 802410A8 00000000 */  nop
/* C375DC 802410AC 45020045 */  bc1fl     .L802411C4
/* C375E0 802410B0 E602003C */   swc1     $f2, 0x3c($s0)
/* C375E4 802410B4 08090470 */  j         .L802411C0
/* C375E8 802410B8 E616003C */   swc1     $f22, 0x3c($s0)
.L802410BC:
/* C375EC 802410BC C6000038 */  lwc1      $f0, 0x38($s0)
/* C375F0 802410C0 27A6001C */  addiu     $a2, $sp, 0x1c
/* C375F4 802410C4 E7A00018 */  swc1      $f0, 0x18($sp)
/* C375F8 802410C8 860200A8 */  lh        $v0, 0xa8($s0)
/* C375FC 802410CC C600001C */  lwc1      $f0, 0x1c($s0)
/* C37600 802410D0 C604003C */  lwc1      $f4, 0x3c($s0)
/* C37604 802410D4 44821000 */  mtc1      $v0, $f2
/* C37608 802410D8 00000000 */  nop
/* C3760C 802410DC 468010A0 */  cvt.s.w   $f2, $f2
/* C37610 802410E0 46000005 */  abs.s     $f0, $f0
/* C37614 802410E4 46020000 */  add.s     $f0, $f0, $f2
/* C37618 802410E8 C6060040 */  lwc1      $f6, 0x40($s0)
/* C3761C 802410EC 27A20024 */  addiu     $v0, $sp, 0x24
/* C37620 802410F0 46022100 */  add.s     $f4, $f4, $f2
/* C37624 802410F4 3C014024 */  lui       $at, 0x4024
/* C37628 802410F8 44811800 */  mtc1      $at, $f3
/* C3762C 802410FC 44801000 */  mtc1      $zero, $f2
/* C37630 80241100 46000021 */  cvt.d.s   $f0, $f0
/* C37634 80241104 46220000 */  add.d     $f0, $f0, $f2
/* C37638 80241108 E7A60020 */  swc1      $f6, 0x20($sp)
/* C3763C 8024110C E7A4001C */  swc1      $f4, 0x1c($sp)
/* C37640 80241110 46200020 */  cvt.s.d   $f0, $f0
/* C37644 80241114 E7A00024 */  swc1      $f0, 0x24($sp)
/* C37648 80241118 AFA20010 */  sw        $v0, 0x10($sp)
/* C3764C 8024111C 8E040080 */  lw        $a0, 0x80($s0)
/* C37650 80241120 0C0372DF */  jal       func_800DCB7C
/* C37654 80241124 27A70020 */   addiu    $a3, $sp, 0x20
/* C37658 80241128 10400015 */  beqz      $v0, .L80241180
/* C3765C 8024112C 00000000 */   nop
/* C37660 80241130 860200A8 */  lh        $v0, 0xa8($s0)
/* C37664 80241134 C604001C */  lwc1      $f4, 0x1c($s0)
/* C37668 80241138 44820000 */  mtc1      $v0, $f0
/* C3766C 8024113C 00000000 */  nop
/* C37670 80241140 46800020 */  cvt.s.w   $f0, $f0
/* C37674 80241144 46002085 */  abs.s     $f2, $f4
/* C37678 80241148 46020000 */  add.s     $f0, $f0, $f2
/* C3767C 8024114C C7A20024 */  lwc1      $f2, 0x24($sp)
/* C37680 80241150 4600103E */  c.le.s    $f2, $f0
/* C37684 80241154 00000000 */  nop
/* C37688 80241158 45000005 */  bc1f      .L80241170
/* C3768C 8024115C 00000000 */   nop
/* C37690 80241160 C7A0001C */  lwc1      $f0, 0x1c($sp)
/* C37694 80241164 AE00001C */  sw        $zero, 0x1c($s0)
/* C37698 80241168 08090471 */  j         .L802411C4
/* C3769C 8024116C E600003C */   swc1     $f0, 0x3c($s0)
.L80241170:
/* C376A0 80241170 C600003C */  lwc1      $f0, 0x3c($s0)
/* C376A4 80241174 46040000 */  add.s     $f0, $f0, $f4
/* C376A8 80241178 08090471 */  j         .L802411C4
/* C376AC 8024117C E600003C */   swc1     $f0, 0x3c($s0)
.L80241180:
/* C376B0 80241180 C606003C */  lwc1      $f6, 0x3c($s0)
/* C376B4 80241184 860200A8 */  lh        $v0, 0xa8($s0)
/* C376B8 80241188 46163081 */  sub.s     $f2, $f6, $f22
/* C376BC 8024118C 44820000 */  mtc1      $v0, $f0
/* C376C0 80241190 00000000 */  nop
/* C376C4 80241194 46800020 */  cvt.s.w   $f0, $f0
/* C376C8 80241198 46001080 */  add.s     $f2, $f2, $f0
/* C376CC 8024119C C604001C */  lwc1      $f4, 0x1c($s0)
/* C376D0 802411A0 46002005 */  abs.s     $f0, $f4
/* C376D4 802411A4 4602003C */  c.lt.s    $f0, $f2
/* C376D8 802411A8 00000000 */  nop
/* C376DC 802411AC 45020005 */  bc1fl     .L802411C4
/* C376E0 802411B0 AE00001C */   sw       $zero, 0x1c($s0)
/* C376E4 802411B4 46043000 */  add.s     $f0, $f6, $f4
/* C376E8 802411B8 08090471 */  j         .L802411C4
/* C376EC 802411BC E600003C */   swc1     $f0, 0x3c($s0)
.L802411C0:
/* C376F0 802411C0 AE00001C */  sw        $zero, 0x1c($s0)
.L802411C4:
/* C376F4 802411C4 8FBF0038 */  lw        $ra, 0x38($sp)
/* C376F8 802411C8 8FB30034 */  lw        $s3, 0x34($sp)
/* C376FC 802411CC 8FB20030 */  lw        $s2, 0x30($sp)
/* C37700 802411D0 8FB1002C */  lw        $s1, 0x2c($sp)
/* C37704 802411D4 8FB00028 */  lw        $s0, 0x28($sp)
/* C37708 802411D8 D7B60048 */  ldc1      $f22, 0x48($sp)
/* C3770C 802411DC D7B40040 */  ldc1      $f20, 0x40($sp)
/* C37710 802411E0 03E00008 */  jr        $ra
/* C37714 802411E4 27BD0050 */   addiu    $sp, $sp, 0x50
