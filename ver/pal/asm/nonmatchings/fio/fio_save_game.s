.set noat      /* allow manual use of $at */
.set noreorder /* don't insert nops after branches */

/* Generated by spimdisasm 1.11.1 */

glabel fio_save_game
/* 681C 8002B41C 27BDFFD8 */  addiu      $sp, $sp, -0x28
/* 6820 8002B420 AFB10014 */  sw         $s1, 0x14($sp)
/* 6824 8002B424 0080882D */  daddu      $s1, $a0, $zero
/* 6828 8002B428 AFBF0020 */  sw         $ra, 0x20($sp)
/* 682C 8002B42C AFB3001C */  sw         $s3, 0x1C($sp)
/* 6830 8002B430 AFB20018 */  sw         $s2, 0x18($sp)
/* 6834 8002B434 0C00AC57 */  jal        fio_fetch_saved_file_info
/* 6838 8002B438 AFB00010 */   sw        $s0, 0x10($sp)
/* 683C 8002B43C 3C108007 */  lui        $s0, %hi(gGameStatusPtr)
/* 6840 8002B440 261014AC */  addiu      $s0, $s0, %lo(gGameStatusPtr)
/* 6844 8002B444 8E020000 */  lw         $v0, 0x0($s0)
/* 6848 8002B448 0000982D */  daddu      $s3, $zero, $zero
/* 684C 8002B44C 0C00AE19 */  jal        fio_serialize_state
/* 6850 8002B450 A0510166 */   sb        $s1, 0x166($v0)
/* 6854 8002B454 3C12800D */  lui        $s2, %hi(gCurrentSaveFile)
/* 6858 8002B458 26527430 */  addiu      $s2, $s2, %lo(gCurrentSaveFile)
/* 685C 8002B45C 3C058007 */  lui        $a1, %hi(magicSaveString)
/* 6860 8002B460 24A518E0 */  addiu      $a1, $a1, %lo(magicSaveString)
/* 6864 8002B464 0C01BF38 */  jal        strcpy
/* 6868 8002B468 0240202D */   daddu     $a0, $s2, $zero
/* 686C 8002B46C 8E030000 */  lw         $v1, 0x0($s0)
/* 6870 8002B470 3C10800A */  lui        $s0, %hi(nextAvailableSavePage)
/* 6874 8002B474 261091E0 */  addiu      $s0, $s0, %lo(nextAvailableSavePage)
/* 6878 8002B478 AE510038 */  sw         $s1, 0x38($s2)
/* 687C 8002B47C 8C620168 */  lw         $v0, 0x168($v1)
/* 6880 8002B480 0240202D */  daddu      $a0, $s2, $zero
/* 6884 8002B484 24420001 */  addiu      $v0, $v0, 0x1
/* 6888 8002B488 AC620168 */  sw         $v0, 0x168($v1)
/* 688C 8002B48C AE42003C */  sw         $v0, 0x3C($s2)
/* 6890 8002B490 2402FFFF */  addiu      $v0, $zero, -0x1
/* 6894 8002B494 AE400030 */  sw         $zero, 0x30($s2)
/* 6898 8002B498 0C00AC36 */  jal        fio_calc_file_checksum
/* 689C 8002B49C AE420034 */   sw        $v0, 0x34($s2)
/* 68A0 8002B4A0 AE420030 */  sw         $v0, 0x30($s2)
/* 68A4 8002B4A4 00021027 */  nor        $v0, $zero, $v0
/* 68A8 8002B4A8 AE420034 */  sw         $v0, 0x34($s2)
.L8002B4AC:
/* 68AC 8002B4AC 0C00AF14 */  jal        fio_erase_flash
/* 68B0 8002B4B0 8E040000 */   lw        $a0, 0x0($s0)
/* 68B4 8002B4B4 0240282D */  daddu      $a1, $s2, $zero
/* 68B8 8002B4B8 8E040000 */  lw         $a0, 0x0($s0)
/* 68BC 8002B4BC 0C00AEDF */  jal        fio_write_flash
/* 68C0 8002B4C0 24061380 */   addiu     $a2, $zero, 0x1380
/* 68C4 8002B4C4 3C058009 */  lui        $a1, %hi(D_80096A90)
/* 68C8 8002B4C8 24A56A90 */  addiu      $a1, $a1, %lo(D_80096A90)
/* 68CC 8002B4CC 8E040000 */  lw         $a0, 0x0($s0)
/* 68D0 8002B4D0 0C00AEA7 */  jal        fio_read_flash
/* 68D4 8002B4D4 24061380 */   addiu     $a2, $zero, 0x1380
/* 68D8 8002B4D8 0C00AB70 */  jal        func_8002ADC0
/* 68DC 8002B4DC 00000000 */   nop
/* 68E0 8002B4E0 10400004 */  beqz       $v0, .L8002B4F4
/* 68E4 8002B4E4 26730001 */   addiu     $s3, $s3, 0x1
/* 68E8 8002B4E8 2A620004 */  slti       $v0, $s3, 0x4
/* 68EC 8002B4EC 1440FFEF */  bnez       $v0, .L8002B4AC
/* 68F0 8002B4F0 00000000 */   nop
.L8002B4F4:
/* 68F4 8002B4F4 8FBF0020 */  lw         $ra, 0x20($sp)
/* 68F8 8002B4F8 8FB3001C */  lw         $s3, 0x1C($sp)
/* 68FC 8002B4FC 8FB20018 */  lw         $s2, 0x18($sp)
/* 6900 8002B500 8FB10014 */  lw         $s1, 0x14($sp)
/* 6904 8002B504 8FB00010 */  lw         $s0, 0x10($sp)
/* 6908 8002B508 03E00008 */  jr         $ra
/* 690C 8002B50C 27BD0028 */   addiu     $sp, $sp, 0x28
