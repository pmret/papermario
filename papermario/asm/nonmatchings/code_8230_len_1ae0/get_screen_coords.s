.set noat # allow manual use of $at
.set noreorder # don't insert nops after branches

.include "include/macro.inc"

glabel get_screen_coords
/* 009938 8002E538 27BDFFB0 */  addiu $sp, $sp, -0x50
/* 00993C 8002E53C AFB20040 */  sw    $s2, 0x40($sp)
/* 009940 8002E540 8FB20060 */  lw    $s2, 0x60($sp)
/* 009944 8002E544 AFB30044 */  sw    $s3, 0x44($sp)
/* 009948 8002E548 8FB30064 */  lw    $s3, 0x64($sp)
/* 00994C 8002E54C AFB1003C */  sw    $s1, 0x3c($sp)
/* 009950 8002E550 8FB10068 */  lw    $s1, 0x68($sp)
/* 009954 8002E554 27A20028 */  addiu $v0, $sp, 0x28
/* 009958 8002E558 AFA20014 */  sw    $v0, 0x14($sp)
/* 00995C 8002E55C 27A2002C */  addiu $v0, $sp, 0x2c
/* 009960 8002E560 AFA20018 */  sw    $v0, 0x18($sp)
/* 009964 8002E564 27A20030 */  addiu $v0, $sp, 0x30
/* 009968 8002E568 AFA2001C */  sw    $v0, 0x1c($sp)
/* 00996C 8002E56C 27A20034 */  addiu $v0, $sp, 0x34
/* 009970 8002E570 3C08800B */  lui   $t0, 0x800b
/* 009974 8002E574 25081D80 */  addiu $t0, $t0, 0x1d80
/* 009978 8002E578 AFA20020 */  sw    $v0, 0x20($sp)
/* 00997C 8002E57C 00041080 */  sll   $v0, $a0, 2
/* 009980 8002E580 00441021 */  addu  $v0, $v0, $a0
/* 009984 8002E584 00021080 */  sll   $v0, $v0, 2
/* 009988 8002E588 00441023 */  subu  $v0, $v0, $a0
/* 00998C 8002E58C 000218C0 */  sll   $v1, $v0, 3
/* 009990 8002E590 00431021 */  addu  $v0, $v0, $v1
/* 009994 8002E594 000210C0 */  sll   $v0, $v0, 3
/* 009998 8002E598 AFB00038 */  sw    $s0, 0x38($sp)
/* 00999C 8002E59C 00488021 */  addu  $s0, $v0, $t0
/* 0099A0 8002E5A0 3C013F80 */  lui   $at, 0x3f80
/* 0099A4 8002E5A4 44810000 */  mtc1  $at, $f0
/* 0099A8 8002E5A8 260400D4 */  addiu $a0, $s0, 0xd4
/* 0099AC 8002E5AC AFBF0048 */  sw    $ra, 0x48($sp)
/* 0099B0 8002E5B0 0C00A588 */  jal   transform_point
/* 0099B4 8002E5B4 E7A00010 */   swc1  $f0, 0x10($sp)
/* 0099B8 8002E5B8 C7A00030 */  lwc1  $f0, 0x30($sp)
/* 0099BC 8002E5BC 3C01459C */  lui   $at, 0x459c
/* 0099C0 8002E5C0 34214000 */  ori   $at, $at, 0x4000
/* 0099C4 8002E5C4 44811000 */  mtc1  $at, $f2
/* 0099C8 8002E5C8 00000000 */  nop   
/* 0099CC 8002E5CC 46020000 */  add.s $f0, $f0, $f2
/* 0099D0 8002E5D0 4600020D */  trunc.w.s $f8, $f0
/* 0099D4 8002E5D4 44024000 */  mfc1  $v0, $f8
/* 0099D8 8002E5D8 00000000 */  nop   
/* 0099DC 8002E5DC 04410003 */  bgez  $v0, .L8002E5EC
/* 0099E0 8002E5E0 AE220000 */   sw    $v0, ($s1)
/* 0099E4 8002E5E4 0800B97F */  j     .L8002E5FC
/* 0099E8 8002E5E8 AE200000 */   sw    $zero, ($s1)

.L8002E5EC:
/* 0099EC 8002E5EC 28422711 */  slti  $v0, $v0, 0x2711
/* 0099F0 8002E5F0 14400002 */  bnez  $v0, .L8002E5FC
/* 0099F4 8002E5F4 24022710 */   addiu $v0, $zero, 0x2710
/* 0099F8 8002E5F8 AE220000 */  sw    $v0, ($s1)
.L8002E5FC:
/* 0099FC 8002E5FC C7A20034 */  lwc1  $f2, 0x34($sp)
/* 009A00 8002E600 3C01800A */  lui   $at, 0x800a
/* 009A04 8002E604 D4208200 */  ldc1  $f0, -0x7e00($at)
/* 009A08 8002E608 460010A1 */  cvt.d.s $f2, $f2
/* 009A0C 8002E60C 4620103C */  c.lt.d $f2, $f0
/* 009A10 8002E610 00000000 */  nop   
/* 009A14 8002E614 4500000B */  bc1f  .L8002E644
/* 009A18 8002E618 00000000 */   nop   
/* 009A1C 8002E61C 3C01800A */  lui   $at, 0x800a
/* 009A20 8002E620 D4208208 */  ldc1  $f0, -0x7df8($at)
/* 009A24 8002E624 4622003C */  c.lt.d $f0, $f2
/* 009A28 8002E628 00000000 */  nop   
/* 009A2C 8002E62C 45000005 */  bc1f  .L8002E644
/* 009A30 8002E630 00000000 */   nop   
/* 009A34 8002E634 AE400000 */  sw    $zero, ($s2)
/* 009A38 8002E638 AE600000 */  sw    $zero, ($s3)
/* 009A3C 8002E63C 0800B9CE */  j     .L8002E738
/* 009A40 8002E640 AE200000 */   sw    $zero, ($s1)

.L8002E644:
/* 009A44 8002E644 C7A00034 */  lwc1  $f0, 0x34($sp)
/* 009A48 8002E648 3C013F80 */  lui   $at, 0x3f80
/* 009A4C 8002E64C 44812000 */  mtc1  $at, $f4
/* 009A50 8002E650 C7A20028 */  lwc1  $f2, 0x28($sp)
/* 009A54 8002E654 9603000A */  lhu   $v1, 0xa($s0)
/* 009A58 8002E658 46002103 */  div.s $f4, $f4, $f0
/* 009A5C 8002E65C 46041082 */  mul.s $f2, $f2, $f4
/* 009A60 8002E660 00000000 */  nop   
/* 009A64 8002E664 00031C00 */  sll   $v1, $v1, 0x10
/* 009A68 8002E668 00031403 */  sra   $v0, $v1, 0x10
/* 009A6C 8002E66C 44820000 */  mtc1  $v0, $f0
/* 009A70 8002E670 00000000 */  nop   
/* 009A74 8002E674 46800020 */  cvt.s.w $f0, $f0
/* 009A78 8002E678 46001082 */  mul.s $f2, $f2, $f0
/* 009A7C 8002E67C 00000000 */  nop   
/* 009A80 8002E680 3C013F00 */  lui   $at, 0x3f00
/* 009A84 8002E684 44813000 */  mtc1  $at, $f6
/* 009A88 8002E688 00000000 */  nop   
/* 009A8C 8002E68C 46061082 */  mul.s $f2, $f2, $f6
/* 009A90 8002E690 00000000 */  nop   
/* 009A94 8002E694 00031FC2 */  srl   $v1, $v1, 0x1f
/* 009A98 8002E698 00431021 */  addu  $v0, $v0, $v1
/* 009A9C 8002E69C 00021043 */  sra   $v0, $v0, 1
/* 009AA0 8002E6A0 44820000 */  mtc1  $v0, $f0
/* 009AA4 8002E6A4 00000000 */  nop   
/* 009AA8 8002E6A8 46800020 */  cvt.s.w $f0, $f0
/* 009AAC 8002E6AC 46020000 */  add.s $f0, $f0, $f2
/* 009AB0 8002E6B0 E7A40034 */  swc1  $f4, 0x34($sp)
/* 009AB4 8002E6B4 8603000E */  lh    $v1, 0xe($s0)
/* 009AB8 8002E6B8 4600020D */  trunc.w.s $f8, $f0
/* 009ABC 8002E6BC 44024000 */  mfc1  $v0, $f8
/* 009AC0 8002E6C0 00000000 */  nop   
/* 009AC4 8002E6C4 00431021 */  addu  $v0, $v0, $v1
/* 009AC8 8002E6C8 AE420000 */  sw    $v0, ($s2)
/* 009ACC 8002E6CC C7A2002C */  lwc1  $f2, 0x2c($sp)
/* 009AD0 8002E6D0 C7A00034 */  lwc1  $f0, 0x34($sp)
/* 009AD4 8002E6D4 9603000C */  lhu   $v1, 0xc($s0)
/* 009AD8 8002E6D8 46001082 */  mul.s $f2, $f2, $f0
/* 009ADC 8002E6DC 00000000 */  nop   
/* 009AE0 8002E6E0 00031C00 */  sll   $v1, $v1, 0x10
/* 009AE4 8002E6E4 00031403 */  sra   $v0, $v1, 0x10
/* 009AE8 8002E6E8 44820000 */  mtc1  $v0, $f0
/* 009AEC 8002E6EC 00000000 */  nop   
/* 009AF0 8002E6F0 46800020 */  cvt.s.w $f0, $f0
/* 009AF4 8002E6F4 46001082 */  mul.s $f2, $f2, $f0
/* 009AF8 8002E6F8 00000000 */  nop   
/* 009AFC 8002E6FC 46061082 */  mul.s $f2, $f2, $f6
/* 009B00 8002E700 00000000 */  nop   
/* 009B04 8002E704 00031FC2 */  srl   $v1, $v1, 0x1f
/* 009B08 8002E708 00431021 */  addu  $v0, $v0, $v1
/* 009B0C 8002E70C 00021043 */  sra   $v0, $v0, 1
/* 009B10 8002E710 44820000 */  mtc1  $v0, $f0
/* 009B14 8002E714 00000000 */  nop   
/* 009B18 8002E718 46800020 */  cvt.s.w $f0, $f0
/* 009B1C 8002E71C 46020001 */  sub.s $f0, $f0, $f2
/* 009B20 8002E720 86030010 */  lh    $v1, 0x10($s0)
/* 009B24 8002E724 4600020D */  trunc.w.s $f8, $f0
/* 009B28 8002E728 44024000 */  mfc1  $v0, $f8
/* 009B2C 8002E72C 00000000 */  nop   
/* 009B30 8002E730 00431021 */  addu  $v0, $v0, $v1
/* 009B34 8002E734 AE620000 */  sw    $v0, ($s3)
.L8002E738:
/* 009B38 8002E738 8FBF0048 */  lw    $ra, 0x48($sp)
/* 009B3C 8002E73C 8FB30044 */  lw    $s3, 0x44($sp)
/* 009B40 8002E740 8FB20040 */  lw    $s2, 0x40($sp)
/* 009B44 8002E744 8FB1003C */  lw    $s1, 0x3c($sp)
/* 009B48 8002E748 8FB00038 */  lw    $s0, 0x38($sp)
/* 009B4C 8002E74C 03E00008 */  jr    $ra
/* 009B50 8002E750 27BD0050 */   addiu $sp, $sp, 0x50

/* 009B54 8002E754 00A0402D */  daddu $t0, $a1, $zero
/* 009B58 8002E758 3C05800B */  lui   $a1, 0x800b
/* 009B5C 8002E75C 24A51D80 */  addiu $a1, $a1, 0x1d80
/* 009B60 8002E760 00041080 */  sll   $v0, $a0, 2
/* 009B64 8002E764 00441021 */  addu  $v0, $v0, $a0
/* 009B68 8002E768 00021080 */  sll   $v0, $v0, 2
/* 009B6C 8002E76C 00441023 */  subu  $v0, $v0, $a0
/* 009B70 8002E770 000218C0 */  sll   $v1, $v0, 3
/* 009B74 8002E774 00431021 */  addu  $v0, $v0, $v1
/* 009B78 8002E778 000210C0 */  sll   $v0, $v0, 3
/* 009B7C 8002E77C 00451021 */  addu  $v0, $v0, $a1
/* 009B80 8002E780 8443000E */  lh    $v1, 0xe($v0)
/* 009B84 8002E784 84450010 */  lh    $a1, 0x10($v0)
/* 009B88 8002E788 8444000A */  lh    $a0, 0xa($v0)
/* 009B8C 8002E78C 8442000C */  lh    $v0, 0xc($v0)
/* 009B90 8002E790 00642021 */  addu  $a0, $v1, $a0
/* 009B94 8002E794 0103182A */  slt   $v1, $t0, $v1
/* 009B98 8002E798 14600004 */  bnez  $v1, .L8002E7AC
/* 009B9C 8002E79C 00A23821 */   addu  $a3, $a1, $v0
/* 009BA0 8002E7A0 0088102A */  slt   $v0, $a0, $t0
/* 009BA4 8002E7A4 10400003 */  beqz  $v0, .L8002E7B4
/* 009BA8 8002E7A8 00C5102A */   slt   $v0, $a2, $a1
.L8002E7AC:
/* 009BAC 8002E7AC 03E00008 */  jr    $ra
/* 009BB0 8002E7B0 24020001 */   addiu $v0, $zero, 1

.L8002E7B4:
/* 009BB4 8002E7B4 10400003 */  beqz  $v0, .L8002E7C4
/* 009BB8 8002E7B8 00E6102A */   slt   $v0, $a3, $a2
/* 009BBC 8002E7BC 03E00008 */  jr    $ra
/* 009BC0 8002E7C0 24020001 */   addiu $v0, $zero, 1

.L8002E7C4:
/* 009BC4 8002E7C4 03E00008 */  jr    $ra
/* 009BC8 8002E7C8 00000000 */   nop   

/* 009BCC 8002E7CC 3C08800B */  lui   $t0, 0x800b
/* 009BD0 8002E7D0 25081D80 */  addiu $t0, $t0, 0x1d80
/* 009BD4 8002E7D4 00041080 */  sll   $v0, $a0, 2
/* 009BD8 8002E7D8 00441021 */  addu  $v0, $v0, $a0
/* 009BDC 8002E7DC 00021080 */  sll   $v0, $v0, 2
/* 009BE0 8002E7E0 00441023 */  subu  $v0, $v0, $a0
/* 009BE4 8002E7E4 000218C0 */  sll   $v1, $v0, 3
/* 009BE8 8002E7E8 00431021 */  addu  $v0, $v0, $v1
/* 009BEC 8002E7EC 000210C0 */  sll   $v0, $v0, 3
/* 009BF0 8002E7F0 00481021 */  addu  $v0, $v0, $t0
/* 009BF4 8002E7F4 8443000E */  lh    $v1, 0xe($v0)
/* 009BF8 8002E7F8 8FA80010 */  lw    $t0, 0x10($sp)
/* 009BFC 8002E7FC ACA30000 */  sw    $v1, ($a1)
/* 009C00 8002E800 84430010 */  lh    $v1, 0x10($v0)
/* 009C04 8002E804 ACC30000 */  sw    $v1, ($a2)
/* 009C08 8002E808 8443000E */  lh    $v1, 0xe($v0)
/* 009C0C 8002E80C 8444000A */  lh    $a0, 0xa($v0)
/* 009C10 8002E810 00641821 */  addu  $v1, $v1, $a0
/* 009C14 8002E814 ACE30000 */  sw    $v1, ($a3)
/* 009C18 8002E818 84430010 */  lh    $v1, 0x10($v0)
/* 009C1C 8002E81C 8442000C */  lh    $v0, 0xc($v0)
/* 009C20 8002E820 00621821 */  addu  $v1, $v1, $v0
/* 009C24 8002E824 03E00008 */  jr    $ra
/* 009C28 8002E828 AD030000 */   sw    $v1, ($t0)

/* 009C2C 8002E82C 00A0302D */  daddu $a2, $a1, $zero
/* 009C30 8002E830 3C05800B */  lui   $a1, 0x800b
/* 009C34 8002E834 24A51D80 */  addiu $a1, $a1, 0x1d80
/* 009C38 8002E838 00041080 */  sll   $v0, $a0, 2
/* 009C3C 8002E83C 00441021 */  addu  $v0, $v0, $a0
/* 009C40 8002E840 00021080 */  sll   $v0, $v0, 2
/* 009C44 8002E844 00441023 */  subu  $v0, $v0, $a0
/* 009C48 8002E848 000218C0 */  sll   $v1, $v0, 3
/* 009C4C 8002E84C 00431021 */  addu  $v0, $v0, $v1
/* 009C50 8002E850 000210C0 */  sll   $v0, $v0, 3
/* 009C54 8002E854 00452021 */  addu  $a0, $v0, $a1
/* 009C58 8002E858 94820212 */  lhu   $v0, 0x212($a0)
/* 009C5C 8002E85C 24420001 */  addiu $v0, $v0, 1
/* 009C60 8002E860 A4820212 */  sh    $v0, 0x212($a0)
/* 009C64 8002E864 00021400 */  sll   $v0, $v0, 0x10
/* 009C68 8002E868 00021403 */  sra   $v0, $v0, 0x10
/* 009C6C 8002E86C 28420004 */  slti  $v0, $v0, 4
/* 009C70 8002E870 14400003 */  bnez  $v0, .L8002E880
/* 009C74 8002E874 00000000 */   nop   
.L8002E878:
/* 009C78 8002E878 0800BA1E */  j     .L8002E878
/* 009C7C 8002E87C 00000000 */   nop   

.L8002E880:
/* 009C80 8002E880 84830212 */  lh    $v1, 0x212($a0)
/* 009C84 8002E884 000310C0 */  sll   $v0, $v1, 3
/* 009C88 8002E888 00431021 */  addu  $v0, $v0, $v1
/* 009C8C 8002E88C 00021080 */  sll   $v0, $v0, 2
/* 009C90 8002E890 00431023 */  subu  $v0, $v0, $v1
/* 009C94 8002E894 00021080 */  sll   $v0, $v0, 2
/* 009C98 8002E898 00821021 */  addu  $v0, $a0, $v0
/* 009C9C 8002E89C AC460220 */  sw    $a2, 0x220($v0)
/* 009CA0 8002E8A0 84830212 */  lh    $v1, 0x212($a0)
/* 009CA4 8002E8A4 000310C0 */  sll   $v0, $v1, 3
/* 009CA8 8002E8A8 00431021 */  addu  $v0, $v0, $v1
/* 009CAC 8002E8AC 00021080 */  sll   $v0, $v0, 2
/* 009CB0 8002E8B0 00431023 */  subu  $v0, $v0, $v1
/* 009CB4 8002E8B4 00021080 */  sll   $v0, $v0, 2
/* 009CB8 8002E8B8 00821021 */  addu  $v0, $a0, $v0
/* 009CBC 8002E8BC 24030001 */  addiu $v1, $zero, 1
/* 009CC0 8002E8C0 A4430216 */  sh    $v1, 0x216($v0)
/* 009CC4 8002E8C4 84830212 */  lh    $v1, 0x212($a0)
/* 009CC8 8002E8C8 000310C0 */  sll   $v0, $v1, 3
/* 009CCC 8002E8CC 00431021 */  addu  $v0, $v0, $v1
/* 009CD0 8002E8D0 00021080 */  sll   $v0, $v0, 2
/* 009CD4 8002E8D4 00431023 */  subu  $v0, $v0, $v1
/* 009CD8 8002E8D8 00021080 */  sll   $v0, $v0, 2
/* 009CDC 8002E8DC 00821021 */  addu  $v0, $a0, $v0
/* 009CE0 8002E8E0 AC460278 */  sw    $a2, 0x278($v0)
/* 009CE4 8002E8E4 84830212 */  lh    $v1, 0x212($a0)
/* 009CE8 8002E8E8 000310C0 */  sll   $v0, $v1, 3
/* 009CEC 8002E8EC 00431021 */  addu  $v0, $v0, $v1
/* 009CF0 8002E8F0 00021080 */  sll   $v0, $v0, 2
/* 009CF4 8002E8F4 00431023 */  subu  $v0, $v0, $v1
/* 009CF8 8002E8F8 00021080 */  sll   $v0, $v0, 2
/* 009CFC 8002E8FC 00821021 */  addu  $v0, $a0, $v0
/* 009D00 8002E900 03E00008 */  jr    $ra
/* 009D04 8002E904 A4400214 */   sh    $zero, 0x214($v0)

/* 009D08 8002E908 00000000 */  nop   
/* 009D0C 8002E90C 00000000 */  nop   


