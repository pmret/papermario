.set noat # allow manual use of $at
.set noreorder # don't insert nops after branches

.include "include/macro.inc"

glabel _heap_malloc_tail
/* 004564 80029164 24A5000F */  addiu $a1, $a1, 0xf
/* 004568 80029168 2402FFF0 */  addiu $v0, $zero, -0x10
/* 00456C 8002916C 00A22824 */  and   $a1, $a1, $v0
/* 004570 80029170 14A00003 */  bnez  $a1, .L80029180
/* 004574 80029174 0000402D */   daddu $t0, $zero, $zero
/* 004578 80029178 03E00008 */  jr    $ra
/* 00457C 8002917C 0100102D */   daddu $v0, $t0, $zero

.L80029180:
/* 004580 80029180 0000302D */  daddu $a2, $zero, $zero
/* 004584 80029184 00C0382D */  daddu $a3, $a2, $zero
.L80029188:
/* 004588 80029188 94820008 */  lhu   $v0, 8($a0)
/* 00458C 8002918C 14400008 */  bnez  $v0, .L800291B0
/* 004590 80029190 00000000 */   nop   
/* 004594 80029194 8C830004 */  lw    $v1, 4($a0)
/* 004598 80029198 0065102B */  sltu  $v0, $v1, $a1
/* 00459C 8002919C 14400004 */  bnez  $v0, .L800291B0
/* 0045A0 800291A0 00000000 */   nop   
/* 0045A4 800291A4 0080402D */  daddu $t0, $a0, $zero
/* 0045A8 800291A8 0060302D */  daddu $a2, $v1, $zero
/* 0045AC 800291AC 8C870000 */  lw    $a3, ($a0)
.L800291B0:
/* 0045B0 800291B0 8C840000 */  lw    $a0, ($a0)
/* 0045B4 800291B4 1480FFF4 */  bnez  $a0, .L80029188
/* 0045B8 800291B8 00000000 */   nop   
/* 0045BC 800291BC 10C00015 */  beqz  $a2, .L80029214
/* 0045C0 800291C0 24A30010 */   addiu $v1, $a1, 0x10
/* 0045C4 800291C4 00C3102B */  sltu  $v0, $a2, $v1
/* 0045C8 800291C8 1440000C */  bnez  $v0, .L800291FC
/* 0045CC 800291CC 0100202D */   daddu $a0, $t0, $zero
/* 0045D0 800291D0 00861021 */  addu  $v0, $a0, $a2
/* 0045D4 800291D4 00451023 */  subu  $v0, $v0, $a1
/* 0045D8 800291D8 AC820000 */  sw    $v0, ($a0)
/* 0045DC 800291DC 00C31023 */  subu  $v0, $a2, $v1
/* 0045E0 800291E0 AC820004 */  sw    $v0, 4($a0)
/* 0045E4 800291E4 A4800008 */  sh    $zero, 8($a0)
/* 0045E8 800291E8 8C840000 */  lw    $a0, ($a0)
/* 0045EC 800291EC 24020001 */  addiu $v0, $zero, 1
/* 0045F0 800291F0 AC870000 */  sw    $a3, ($a0)
/* 0045F4 800291F4 0800A482 */  j     .L80029208
/* 0045F8 800291F8 AC850004 */   sw    $a1, 4($a0)

.L800291FC:
/* 0045FC 800291FC 24020001 */  addiu $v0, $zero, 1
/* 004600 80029200 AC870000 */  sw    $a3, ($a0)
/* 004604 80029204 AC860004 */  sw    $a2, 4($a0)
.L80029208:
/* 004608 80029208 A4820008 */  sh    $v0, 8($a0)
/* 00460C 8002920C 03E00008 */  jr    $ra
/* 004610 80029210 24820010 */   addiu $v0, $a0, 0x10

.L80029214:
/* 004614 80029214 03E00008 */  jr    $ra
/* 004618 80029218 0000102D */   daddu $v0, $zero, $zero

